# benchmark image (map tile) creation using Rasterio (GDAL) or Pillow

ref: https://github.com/cogeotiff/rio-tiler/issues/29

### 1 Band Dataset + colormap

**Fastest loop**

format | PNG | JPEG | JPEG2000 | WEBP
---    | --- | ---  | ---  | ---
**Pillow** (ms) | **40** | 8 | 158 | 149
**Rasterio** (ms) | 63 | 14 | **60** | 153
**Rasterio** Custom (ms) | - | **6** | **60** | **23**


### 1 Band Dataset

**Fastest loop**

format | PNG | JPEG | JPEG2000 | WEBP
---    | --- | ---  | ---  | ---
**Pillow** (ms) | **23** | 7 | 48 | 146
**Rasterio** (ms) | 34 | 5 | **22** | 146
**Rasterio** Custom (ms) | - | **1** | **22** | **18**

### 3 Bands Dataset

**Fastest loop**

format | PNG | JPEG | JPEG2000 | WEBP
---    | --- | ---  | ---  | ---
**Pillow** (ms) | **49** | 12 | 183 | 195
**Rasterio** (ms) | 66 | 10 | 43 | 187
**Rasterio** Custom (ms) | - | **2** | **42** | **22**


# 1Band dataset + Colormap
### Using PIL Wheels
```
Pillow
png:  (0.040454009998939, 0.06484452000222518, 4.428491986986046)
jpeg:  (0.008887080002750736, 0.01253627799815149, 0.9993353519967059)
jp2:  (0.1585890450005536, 0.20649698099805391, 16.584426539007836)
webp:  (0.14990074600063963, 0.1874054049985716, 15.837559482017241)
```

### Using Rasterio Wheels
```
Rasterio (Wheels)
png:  (0.06382252799812704, 0.07716204399912385, 6.595846460983012)
jpeg:  (0.014473450999503257, 0.0193509240016283, 1.5191046690088115)
jp2:  (0.06090643799689133, 0.07457731799877365, 6.217022820004786)
webp:  (0.15332742600003257, 0.19234287799918093, 15.66430007999952)
```

### Using Custom GDAL build
```
Rasterio
png:                  --Driver is not available--
jpeg:  (0.00643038399721263, 0.011965218000113964, 0.7341810780162632)
jp2:  (0.06029424799999106, 0.07973235800091061, 6.560152037982334)
webp:  (0.02326098200137494, 0.03255914400142501, 2.5038523199800693)

```

# 1Band dataset
### Using PIL Wheels
```
Pillow
png:  (0.023762799999531126, 0.03722643999935826, 2.439271661998646)
jpeg:  (0.007929617000627331, 0.009701978000521194, 0.8227394559980894)
jp2:  (0.04894323099870235, 0.07998713200140628, 5.07188611899619)
webp:  (0.14607903499927488, 0.21938198900170391, 15.473760379984014)
```

### Using Rasterio Wheels
```
Rasterio (Wheels)
png:  (0.03425610100021004, 0.04834175900032278, 3.540982654023537)
jpeg:  (0.005781257001217455, 0.01291743299952941, 0.6523276620173419)
jp2:  (0.022952399998757755, 0.08033011099905707, 2.7872789970133454)
webp:  (0.14681480700164684, 0.1638908029999584, 14.978309719990648)
```

### Using Custom GDAL build
```
Rasterio
png:                  --Driver is not available--
jpeg:  (0.0017301650004810654, 0.004624033001164207, 0.23406146700290265)
jp2:  (0.022246023996558506, 0.04375992000132101, 2.459743629973673)
webp:  (0.01870539599985932, 0.026656183999875793, 1.999466217970621)
```

# 3Bands dataset
### Using PIL (wheels)
```
Pillow
png:  (0.04958566699860967, 0.06946565100224689, 5.3499011139938375)
jpeg:  (0.01238601099976222, 0.019949104000261286, 1.3348194370046258)
jp2:  (0.18399552700066124, 0.2331175049985177, 19.26775658699262)
webp:  (0.19503436400191276, 0.30881683500047075, 20.478205503979552)
```

### Using Rasterio Wheels
```
Rasterio (Wheels)
png:  (0.0669942809981876, 0.0786672260001069, 6.807814658983261)
jpeg:  (0.010823143002198776, 0.014973022996855434, 1.1254711970213975)
jp2:  (0.04345193600238417, 0.05721010300112539, 4.471985373042116)
webp:  (0.18751085800249712, 0.22874422799941385, 19.105754625015834)
```


### Using Custom GDAL build
```
Rasterio
png:                  --Driver is not available--
jpeg:  (0.0026321930017729755, 0.008799650000582915, 0.3572210379934404)
jp2:  (0.042525327000475954, 0.05805899799815961, 4.5146783179698105)
webp:  (0.02292240500173648, 0.055474441000114894, 2.5958886410007835)
```

Custom GDAL install ref: https://github.com/RemotePixel/amazonlinux-gdal/tree/gdal2.4.0
